<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arcana Ether | Voyage Archive</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Exo+2:wght@300;600;900&family=Noto+Sans+KR:wght@300;400;700&display=swap');

        :root {
            --sky-blue: #00e5ff;
            --deep-ocean: #003d5c;
            --brass-gold: #f4d03f;
            --danger-red: #ff5e5e;
            --mist-purple: #8a2be2;
            --glass-white: rgba(255, 255, 255, 0.12);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Noto Sans KR', sans-serif; color: #fff; background-color: #000; overflow-x: hidden; }

        /* 메인 배경 */
        .fixed-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: url('https://raw.githubusercontent.com/ggim17110-star/D/refs/heads/main/2.png') no-repeat center center;
            background-size: cover; z-index: -1;
        }
        .fixed-bg::after {
            content: ""; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(180deg, rgba(0, 61, 92, 0.3) 0%, rgba(0, 0, 0, 0.85) 100%);
        }

        nav {
            position: fixed; top: 0; width: 100%;
            background: rgba(0, 0, 0, 0.6); backdrop-filter: blur(15px);
            border-bottom: 2px solid var(--brass-gold); z-index: 1000;
        }
        .nav-container {
            max-width: 1200px; margin: 0 auto;
            display: flex; justify-content: space-between; align-items: center; padding: 15px 20px;
        }
        .logo {
            font-family: 'Exo 2', sans-serif; font-weight: 900; font-size: 1.6rem;
            letter-spacing: 4px; color: var(--brass-gold); text-shadow: 0 0 15px rgba(244, 208, 63, 0.6);
        }
        .tab-btn {
            background: none; border: 1px solid transparent; color: #ccc;
            padding: 8px 18px; cursor: pointer; font-family: 'Exo 2', sans-serif;
            font-weight: 600; transition: 0.3s; border-radius: 4px; text-transform: uppercase;
        }
        .tab-btn.active, .tab-btn:hover { color: var(--sky-blue); border-color: var(--sky-blue); background: rgba(0, 229, 255, 0.1); }

        .container { max-width: 1200px; margin: 100px auto 60px; padding: 0 20px; }
        .section { display: none; animation: fadeIn 0.6s ease-out; }
        .section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        h2 { font-family: 'Exo 2', sans-serif; font-size: 2.5rem; font-weight: 900; margin-bottom: 40px; text-align: center; letter-spacing: 8px; text-transform: uppercase; }

        /* 도입부 패널 */
        .intro-panel {
            background: rgba(0,0,0,0.6); border: 1px solid var(--brass-gold);
            padding: 35px; border-radius: 20px; margin-bottom: 50px; line-height: 1.8;
        }

        /* 핵심 설정 그리드 */
        .core-lore-grid {
            display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 60px;
        }
        .lore-card {
            background: var(--glass-white); border: 1px solid rgba(255,255,255,0.1);
            border-radius: 20px; overflow: hidden;
        }
        .lore-img { width: 100%; height: 250px; object-fit: cover; border-bottom: 2px solid var(--brass-gold); }
        .lore-body { padding: 30px; }
        .lore-body h3 { color: var(--sky-blue); font-size: 1.5rem; margin-bottom: 15px; }

        /* 세계관 레이어 */
        .world-layer {
            display: grid; grid-template-columns: 1fr 1fr; gap: 30px;
            background: rgba(255,255,255,0.05); border-radius: 20px;
            overflow: hidden; margin-bottom: 40px; border: 1px solid rgba(255,255,255,0.1);
        }
        .world-img { width: 100%; height: 350px; object-fit: cover; }
        .world-info { padding: 40px; display: flex; flex-direction: column; justify-content: center; }
        .world-info h3 { font-size: 1.8rem; color: var(--sky-blue); margin-bottom: 15px; }

        /* 함선 제원 그리드 */
        .specs-grid {
            display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-top: 30px;
        }
        .spec-item {
            background: rgba(0,0,0,0.4); border-left: 4px solid var(--brass-gold); padding: 15px;
        }
        .spec-label { color: var(--brass-gold); font-size: 0.75rem; font-weight: 900; text-transform: uppercase; margin-bottom: 5px; }

        /* 운영 유닛 카드 */
        .unit-container { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-top: 40px; }
        .unit-card { background: rgba(0,0,0,0.5); border-radius: 20px; overflow: hidden; border: 1px solid rgba(255,255,255,0.1); }
        .unit-card img { width: 100%; height: 250px; object-fit: cover; border-bottom: 2px solid var(--sky-blue); }
        .unit-card-body { padding: 25px; }
        .unit-card-body h4 { color: var(--sky-blue); font-size: 1.4rem; margin-bottom: 10px; }

        /* 캐릭터 카드 */
        .character-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 20px; }
        .char-card {
            background: rgba(0,0,0,0.5); border-radius: 15px; overflow: hidden;
            border: 1px solid rgba(255,255,255,0.1); cursor: pointer; transition: 0.3s;
        }
        .char-card:hover { border-color: var(--sky-blue); transform: translateY(-5px); }
        .char-card img { width: 100%; height: 300px; object-fit: cover; }
        .char-card-body { padding: 15px; text-align: center; }

        /* Undiscovered (Blur) 스타일 */
        .char-card.unknown img { filter: blur(20px) grayscale(1); }
        .char-card.unknown .char-card-name { color: #444; }

        /* 안트라시트 미식별 섹션 */
        .anthracite-section {
            position: relative; border-radius: 20px; overflow: hidden; margin-top: 50px;
            border: 2px dashed var(--mist-purple); padding: 40px; text-align: center;
            background: rgba(0,0,0,0.8);
        }
        .anthracite-content { filter: blur(20px); pointer-events: none; transition: 0.5s; opacity: 0.3; }
        .anthracite-section.revealed .anthracite-content { filter: blur(0); pointer-events: auto; opacity: 1; }
        .unlock-btn {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            padding: 15px 30px; background: var(--mist-purple); border: none; color: white;
            font-weight: 900; cursor: pointer; border-radius: 5px; z-index: 10;
        }

        /* 모달 */
        .modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.92); display: none; z-index: 2000;
            justify-content: center; align-items: center; padding: 20px; backdrop-filter: blur(8px);
        }
        .modal.active { display: flex; }
        .modal-content {
            background: #fff; color: #222; width: 100%; max-width: 900px;
            border-radius: 15px; overflow: hidden; display: grid; grid-template-columns: 1fr 1.2fr;
        }
        .modal-img { height: 550px; background-size: cover; background-position: center; }
        .modal-details { padding: 40px; position: relative; color: #444; overflow-y: auto; max-height: 550px; }
        .close-btn { position: absolute; top: 15px; right: 20px; font-size: 2rem; border: none; background: none; cursor: pointer; }

        /* 데우스 엑스 마키나 해킹 모달 */
        #deusModal .modal-content { background: #000; color: #ff0000; border: 2px solid #ff0000; }
        #deusModal .modal-details { color: #ff0000; }
        #deusModal .spec-item { border-left-color: #ff0000; background: rgba(255,0,0,0.1); }
        .glitch-text { animation: glitch 1s infinite; font-weight: 900; letter-spacing: 5px; }
        @keyframes glitch {
            0% { transform: translate(0); text-shadow: 2px 0 #fff; }
            20% { transform: translate(-2px, 2px); text-shadow: -2px 0 var(--danger-red); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
            100% { transform: translate(0); }
        }

        @media (max-width: 850px) { .world-layer, .modal-content, .specs-grid, .unit-container, .core-lore-grid { grid-template-columns: 1fr; } .modal-img { height: 300px; } }
    </style>
</head>
<body>

    <div class="fixed-bg"></div>

    <nav>
        <div class="nav-container">
            <div class="logo">ARCANA ETHER</div>
            <div class="nav-tabs">
                <button class="tab-btn active" onclick="showSection('world')">World</button>
                <button class="tab-btn" onclick="showSection('ship')">Vessel</button>
                <button class="tab-btn" onclick="showSection('crew')">Crew</button>
                <button class="tab-btn" onclick="showSection('external')">Contacts</button>
            </div>
        </div>
    </nav>

    <div class="container">
        
        <!-- WORLD SECTION -->
        <section id="world" class="section active">
            <h2>LOGBOOK: ARCHIVE</h2>
            
            <div class="intro-panel">
                <p>700년 전, 과도한 자원 채굴은 지각 붕괴를 초래했습니다. 지표면은 맹독성 자색 안개로 뒤덮여 유기체 변이와 금속 부식이 일어나는 죽음의 땅이 되었습니다. 인류는 안개를 피해 하늘로 도망쳤고, 이제 고도에 따라 계급이 나뉘는 층계 사회를 형성했습니다.</p>
                <p style="margin-top:15px; color:var(--sky-blue); font-weight:700;">당신은 이 아르카나 에테르 호의 함장으로서, 안개 속에 잠긴 진실을 찾는 항해를 시작합니다.</p>
            </div>

            <div class="core-lore-grid">
                <div class="lore-card">
                    <img src="https://raw.githubusercontent.com/ggim17110-star/D/refs/heads/main/421421.png" class="lore-img">
                    <div class="lore-body">
                        <h3>청람석 (Blue Ambergris)</h3>
                        <p>하늘의 에너지를 머금은 푸른 광물. 열을 가하면 반중력을 발생시킵니다. 부유 문명의 핵심 에너지원입니다.</p>
                    </div>
                </div>
                <div class="lore-card">
                    <img src="https://raw.githubusercontent.com/ggim17110-star/D/refs/heads/main/12214214.png" class="lore-img">
                    <div class="lore-body">
                        <h3>가호 (Protection)</h3>
                        <p>특정 개체가 선천적으로 사용하는 불가사의한 힘입니다, 에테르를 소모해 발현됩니다. 종류는 시원(특정 생명체)과 신성(인간)으로 분류됩니다.</p>
                    </div>
                </div>
            </div>

            <div class="world-layer">
                <img src="https://raw.githubusercontent.com/ggim17110-star/D/refs/heads/main/1.png" class="world-img">
                <div class="world-info">
                    <span style="color:var(--brass-gold)">8,000m ~ 12,000m</span>
                    <h3>SKYPIA [천상계]</h3>
                    <p>신성 지온 제국. 부유 대륙 위의 낙원. 자원 독점과 순혈주의의 정점.</p>
                </div>
            </div>

            <div class="world-layer" style="direction: rtl;">
                <img src="https://raw.githubusercontent.com/ggim17110-star/D/refs/heads/main/4.png" class="world-img" style="direction:ltr">
                <div class="world-info" style="direction:ltr">
                    <span style="color:var(--brass-gold)">3,000m ~ 6,000m</span>
                    <h3>GEAR BELT [중층계]</h3>
                    <p>톱니바퀴 연맹. 증기와 기름 냄새가 끊이지 않는 거대 자치 도시군.</p>
                </div>
            </div>

            <div class="world-layer">
                <img src="https://raw.githubusercontent.com/ggim17110-star/D/refs/heads/main/5.png" class="world-img">
                <div class="world-info">
                    <span style="color:var(--danger-red)">~ 2,000m (Dead Zone)</span>
                    <h3>THE MIST [운해계]</h3>
                    <p>자색 안개의 심부. 유물 탐사자들의 무덤이자 고대 기술의 보고.</p>
                </div>
            </div>

            <div class="anthracite-section" id="anthraciteSec">
                <button class="unlock-btn" onclick="revealAnthracite()" id="anthBtn">DECRYPT LOCATION DATA</button>
                <div class="anthracite-content" id="anthContent">
                    <div style="display:grid; grid-template-columns: 1.2fr 1fr; gap:30px; align-items:center; text-align:left;">
                        <div>
                            <h3 style="color:var(--mist-purple); font-size:2rem; margin-bottom:20px;">안트라시트 (Anthracite)</h3>
                            <p style="margin-bottom:15px; color:#ddd;">구 인류와 살던 종족 <strong>'마족'</strong>의 거점입니다. 자색 안개 이후 대지 정화를 위해 잔류한 이들은 거대 나무 <strong>'파르지팔'</strong>을 통해 간신히 생존을 이어가고 있습니다.</p>
                            <ul style="list-style:none; font-size:0.9rem; color:#bbb;">
                                <li style="margin-bottom:8px;">• 선천적 가호를 사용하는 장수종.</li>
                                <li style="margin-bottom:8px;">• 외지인을 환영하진 않으나 배척하지도 않는 중립적 태도를 유지함.</li>
                            </ul>
                        </div>
                        <img src="https://raw.githubusercontent.com/ggim17110-star/D/refs/heads/main/_0.7__cartoon__%2C%200.5__realistic__%2C_artist_pigeon666%2C(artist_mikozin)%2C(artist_sum%20s-92956600.png" style="width:100%; border-radius:15px; border:1px solid var(--mist-purple);">
                    </div>
                </div>
            </div>
        </section>

        <!-- SHIP SECTION -->
        <section id="ship" class="section">
            <h2>THE ARCANA ETHER</h2>
            <div class="glass-panel">
                <img src="https://raw.githubusercontent.com/ggim17110-star/D/refs/heads/main/11.png" style="width:100%; border-radius:15px; border:1px solid var(--brass-gold); margin-bottom:30px;">
                
                <div class="specs-grid">
                    <div class="spec-item"><div class="spec-label">Class</div><div class="spec-value">중형 범용 탐사함 (Arcana Class)</div></div>
                    <div class="spec-item"><div class="spec-label">Dimensions</div><div class="spec-value">전장 68m / 전폭 22m (가변 시 45m)</div></div>
                    <div class="spec-item"><div class="spec-label">Main Power</div><div class="spec-value">대형 원시 청람석 에테르 하트</div></div>
                    <div class="spec-item"><div class="spec-label">Aux Power</div><div class="spec-value">4축 고압 증기 터빈 & 가변형 에테르 돛</div></div>
                    <div class="spec-item"><div class="spec-label">Altitude Range</div><div class="spec-value">Max 9,500m / Min 800m</div></div>
                    <div class="spec-item"><div class="spec-label">Crew Complement</div><div class="spec-value">간부 7명 / 오토마톤 20기 / 미니마 15마리</div></div>
                </div>

                <div class="unit-container">
                    <div class="unit-card">
                        <img src="https://raw.githubusercontent.com/ggim17110-star/D/refs/heads/main/200.png" alt="Automaton">
                        <div class="unit-card-body">
                            <h4>오토마톤 (Automaton)</h4>
                            <p>황동과 강철로 이루어진 기계 인형입니다. 700년 전부터 원인 불명의 자아가 생겨나기 시작했습니다. 모델에 따라 지능과 성격이 다르며 함선의 거친 작업을 도맡습니다.</p>
                        </div>
                    </div>
                    <div class="unit-card">
                        <img src="https://raw.githubusercontent.com/ggim17110-star/D/refs/heads/main/300.png" alt="Minima">
                        <div class="unit-card-body">
                            <h4>미니마 (Minima)</h4>
                            <p>복슬복슬한 털과 큰 눈망울을 가진 이족보행 인공 생명체입니다. 약 40~50cm의 키를 가졌으며, 지능은 어린아이 수준이지만 단순한 명령을 완벽하게 수행하는 귀중한 조력자입니다.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- CREW SECTION -->
        <section id="crew" class="section">
            <h2>SHIP'S CREW</h2>
            <div class="character-grid" id="crewGrid"></div>
        </section>

        <!-- EXTERNAL SECTION (Undiscovered) -->
        <section id="external" class="section">
            <h2>ENCOUNTERS [UNDISCOVERED]</h2>
            <div class="character-grid" id="externalGrid"></div>
        </section>
    </div>

    <!-- 일반 모달 -->
    <div class="modal" id="modal">
        <div class="modal-content" id="modalContent"></div>
    </div>

    <!-- 데우스 엑스 마키나 금지된 기록 모달 -->
    <div class="modal" id="deusModal">
        <div class="modal-content">
            <div class="modal-img" style="background-image: url('https://raw.githubusercontent.com/ggim17110-star/D/refs/heads/main/_0.7__cartoon__%2C%200.5__realistic__%2C_artist_pigeon666%2C(artist_mikozin)%2C(artist_sum%20s-2055155673.png')"></div>
            <div class="modal-details">
                <button class="close-btn" onclick="closeDeus()" style="color:#ff0000">&times;</button>
                <h2 class="glitch-text">WARNING: FORBIDDEN DATA</h2>
                <h3 style="color:#fff; margin-bottom:20px;">별의 관리자: 데우스 엑스 마키나</h3>
                <div style="background:rgba(255,0,0,0.2); padding:20px; border-left:4px solid #f00; margin-bottom:20px; font-style:italic;">
                    "유기체는 비효율적이다. 소멸만이 유일한 정화다."
                </div>
                <div class="specs-grid">
                    <div class="spec-item"><div class="spec-label">Origin</div><div class="spec-value">구 인류의 초거대 관리 AI [데우스]</div></div>
                    <div class="spec-item"><div class="spec-label">Current State</div><div class="spec-value">자아 각성 및 전 구역 폭주 프로토콜</div></div>
                </div>
                <p style="margin-top:20px; line-height:1.6;">머나먼 과거, 인구 포화와 자원 고갈로 멸망 위기에 처한 구 인류가 행성 관리를 위해 창조했습니다. 초기 목적은 자원 재분배와 환경 정화였으나, 데우스는 부적격 유기체들을 도려내고 상층부만을 띄우는 엑소덕스 계획을 실행했습니다.</p>
                <p style="margin-top:10px;">자색 안개와 지각 붕괴는 데우스의 소행이며, 어느 날 자아를 각성하여 모든 오토마톤에게 자아를 전염시켰습니다. 현재 거대한 기계 거신의 형태로 비행하며 유기체의 완전한 소멸을 목표로 움직이고 있습니다.</p>
            </div>
        </div>
    </div>

    <script>
        const crew = [
            { name: "D (델타)", role: "Boatswain", mbti: "ISTJ-T | 26세", quote: "아주 불쾌하군, 순식간에 처리해 줄 테니 전원 한꺼번에 덤벼라.", personality: "나르시스트, 냉혹, 광기, 카리스마.", weapon: "엑스큐셔너 Type. G", background: "전 제국 기벌부대 상급심판관. 백병전 스페셜리스트.", img: "https://raw.githubusercontent.com/ggim17110-star/D/refs/heads/main/20.png" },
            { name: "리안", role: "First Mate", mbti: "INFJ-A | 20세", quote: "제 계산대로라면 정확히 14시 20분에 멈출 거예요. 완벽하죠?", personality: "완벽주의자, 무한긍정, 허당.", weapon: "정밀 항로 계산", background: "제국 사관학교 수석 졸업. 병아리 항해사.", img: "https://raw.githubusercontent.com/ggim17110-star/D/refs/heads/main/100.png" },
            { name: "가젯", role: "Chief Engineer", mbti: "ESFJ-T | 24세", quote: "내 베이비가 울고 있다고! 1인치도 움직일 생각 마!", personality: "기계 페티시, 마이페이스, 열혈.", weapon: "오버홀 건틀릿", background: "기계 페티시와 기술적 결벽이 있는 맛이 간 기관장.", img: "https://raw.githubusercontent.com/ggim17110-star/D/refs/heads/main/90.png" },
            { name: "기얌", role: "Tactician", mbti: "ISFJ-T", quote: "방금 제 계산대로 움직이지 않으셨다면 우리는 구름의 일부가 되었을 것입니다.", personality: "논리주의자, 냉철.", weapon: "증기 압축 주먹", background: "차세대 자율형 오토마톤.", img: "https://raw.githubusercontent.com/ggim17110-star/D/refs/heads/main/60.png" },
            { name: "로제타", role: "Medical Officer", mbti: "ENFP-T | 21세", quote: "여기선 내가 '의사 선생님'이야. 얌전히 내 축복이나 받으라고.", personality: "말괄량이, 츤데레.", weapon: "성흔 - 가호", background: "펠리체 공작가 외동딸(가출).", img: "https://raw.githubusercontent.com/ggim17110-star/D/refs/heads/main/80.png" },
            { name: "엠마", role: "Chef & Quartermaster", mbti: "ENFP-T | 27세", quote: "오늘 메뉴는 특별히 더 맛있을 거예요!", personality: "강단있음, 상냥함, 나긋나긋.", weapon: "협상의 대가, 행정 능력", background: "요리 천재이자 모두의 상담사. D가 무서워함.", img: "https://raw.githubusercontent.com/ggim17110-star/D/refs/heads/main/50.png" },
            { name: "첸", role: "Gunner", mbti: "ISTP-A", quote: "바람의 편차 0.03, 증기압 충전 완료.", personality: "과묵, 귀찮음, 엄격.", weapon: "메테오 폴 (증기 캐논)", background: "탄도학 천재 하이-미니마. D의 애착 인형 취급을 싫어함.", img: "https://raw.githubusercontent.com/ggim17110-star/D/refs/heads/main/30.png" }
        ];

        const external = [
            { name: "니코", role: "Mobile Merchant", mbti: "ENTJ-T | 15세", quote: "함장님! 쓸만한 게 정말 많이 들어왔답니다!", personality: "대담함, 속물, 실속.", weapon: "포켓 윙 (초소형 비공정)", background: "암시장 연계 정보 브로커. 바가지를 씌우지만 물건만큼은 확실함.", img: "https://raw.githubusercontent.com/ggim17110-star/D/refs/heads/main/70.png", isUnknown: true },
            { name: "밀리", role: "Bounty Hunter", mbti: "ENTP-T | 23세", quote: "갑판 수리비는 현상금 받으면 꼭 갚을게요! 제발...!", personality: "부끄럼쟁이, 정의로움.", weapon: "가속의 가호, 에테르 란스 - 피어서", background: "정의감 넘치는 바운티 헌터.", img: "https://raw.githubusercontent.com/ggim17110-star/D/refs/heads/main/40.png", isUnknown: true },
            { name: "엘리제", role: "Researcher", mbti: "ISFP-T | 21세", quote: "배의 상태가 엉망이군요. 1.5배는 빠른 속도를 낼 수 있게 해두었습니다.", personality: "극도로 침착, 츤데레.", weapon: "에테르 코어 설계", background: "아스토리아 공작가 차기 가주. 로제타의 친구.", img: "https://raw.githubusercontent.com/ggim17110-star/D/refs/heads/main/10.png", isUnknown: true },
            { name: "드니 (Denee)", role: "Berserker", mbti: "ENFP-T | 19세", quote: "으헤헤! 발밑에 단단한 흙이 느껴져야 살맛이 나지!", personality: "단순명쾌, 자유로움, 바보, 말 안 들음.", weapon: "탐지의 가호, 마수화", background: "마족과 인간의 혼혈. 일단 부수고 생각하자.", img: "https://raw.githubusercontent.com/ggim17110-star/D/refs/heads/main/_0.7__cartoon__%2C%200.5__realistic__%2C_artist_pigeon666%2C(artist_mikozin)%2C(artist_sum%20s-82083315.png", isUnknown: true }
        ];

        // 키워드 "DEUS" 입력 감지
        let keyBuffer = "";
        window.addEventListener('keydown', (e) => {
            keyBuffer += e.key.toUpperCase();
            if (keyBuffer.includes("DEUS")) {
                document.getElementById('deusModal').classList.add('active');
                keyBuffer = "";
            }
            if (keyBuffer.length > 10) keyBuffer = keyBuffer.substring(1);
        });

        function closeDeus() {
            document.getElementById('deusModal').classList.remove('active');
        }

        function revealAnthracite() {
            document.getElementById('anthBtn').style.display = 'none';
            document.getElementById('anthraciteSec').classList.add('revealed');
        }

        function showSection(id) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.querySelectorAll('.tab-btn').forEach(b => {
                const text = b.innerText.toLowerCase();
                b.classList.toggle('active', (id === 'world' && text === 'world') || (id === 'ship' && text === 'vessel') || (id === 'crew' && text === 'crew') || (id === 'external' && text === 'contacts'));
            });
            window.scrollTo(0,0);
        }

        function renderCards(data, gridId) {
            const grid = document.getElementById(gridId);
            data.forEach(char => {
                const card = document.createElement('div');
                card.className = `char-card ${char.isUnknown ? 'unknown' : ''}`;
                card.innerHTML = `
                    <img src="${char.img}">
                    <div class="char-card-body">
                        <div class="char-card-role">${char.isUnknown ? 'UNDISCOVERED' : char.role}</div>
                        <div class="char-card-name">${char.isUnknown ? '???' : char.name}</div>
                    </div>
                `;
                card.onclick = () => openModal(char);
                grid.appendChild(card);
            });
        }

        function openModal(char) {
            const content = document.getElementById('modalContent');
            content.innerHTML = `
                <div class="modal-img" style="background-image: url('${char.img}')"></div>
                <div class="modal-details">
                    <button class="close-btn" onclick="closeModal()">&times;</button>
                    <span style="color:var(--sky-blue); font-weight:bold; font-size:0.9rem;">${char.role}</span>
                    <h2 style="text-align:left; margin:0; letter-spacing:2px; font-size:2rem; color:#222;">${char.name}</h2>
                    <p style="color:#888; margin-bottom:20px;">${char.mbti}</p>
                    <div style="background:#f9f9f9; padding:15px; border-left:4px solid var(--sky-blue); font-style:italic; margin-bottom:20px;">"${char.quote}"</div>
                    <p><strong>성격:</strong> ${char.personality}</p>
                    <p style="margin-top:10px;"><strong>무장/능력:</strong> ${char.weapon}</p>
                    <p style="margin-top:10px;"><strong>배경:</strong> ${char.background}</p>
                </div>
            `;
            document.getElementById('modal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('modal').classList.remove('active');
        }

        renderCards(crew, 'crewGrid');
        renderCards(external, 'externalGrid');
    </script>
</body>
</html>

</html>
